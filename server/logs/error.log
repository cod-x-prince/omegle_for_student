{"environment":"development","error":"Router.use() requires a middleware function but got a undefined","level":"error","message":"ðŸ†˜ UNCAUGHT EXCEPTION - CRITICAL","pid":7460,"service":"campusconnect-server","stack":"TypeError: Router.use() requires a middleware function but got a undefined\n    at Function.use (C:\\Omegle\\node_modules\\express\\lib\\router\\index.js:469:13)\n    at Function.<anonymous> (C:\\Omegle\\node_modules\\express\\lib\\application.js:227:21)\n    at Array.forEach (<anonymous>)\n    at Function.use (C:\\Omegle\\node_modules\\express\\lib\\application.js:224:7)\n    at setupSecurity (C:\\Omegle\\server\\config\\security.js:221:7)\n    at CampusConnectServer.setupMiddleware (C:\\Omegle\\server\\server.js:153:5)\n    at new CampusConnectServer (C:\\Omegle\\server\\server.js:128:10)\n    at Object.<anonymous> (C:\\Omegle\\server\\server.js:2120:18)\n    at Module._compile (node:internal/modules/cjs/loader:1688:14)\n    at Object..js (node:internal/modules/cjs/loader:1820:10)","timestamp":"2025-10-04 17:01:58.731"}
{"details":{"error":"Router.use() requires a middleware function but got a undefined","eventId":"20831bdde93cd236a173a721dbcc282a","pid":7460,"severity":"critical","timestamp":1759577518732,"type":"uncaught_exception"},"environment":"development","eventId":"20831bdde93cd236a173a721dbcc282a","level":"error","message":"Security event tracked","service":"campusconnect-server","severity":"critical","timestamp":"2025-10-04 17:01:58.732","type":"uncaught_exception"}
{"environment":"development","error":"Router.use() requires a middleware function but got a undefined","level":"error","message":"ðŸ†˜ UNCAUGHT EXCEPTION - CRITICAL","pid":23476,"service":"campusconnect-server","stack":"TypeError: Router.use() requires a middleware function but got a undefined\n    at Function.use (C:\\Omegle\\node_modules\\express\\lib\\router\\index.js:469:13)\n    at Function.<anonymous> (C:\\Omegle\\node_modules\\express\\lib\\application.js:227:21)\n    at Array.forEach (<anonymous>)\n    at Function.use (C:\\Omegle\\node_modules\\express\\lib\\application.js:224:7)\n    at setupSecurity (C:\\Omegle\\server\\config\\security.js:227:7)\n    at CampusConnectServer.setupMiddleware (C:\\Omegle\\server\\server.js:154:5)\n    at new CampusConnectServer (C:\\Omegle\\server\\server.js:129:10)\n    at Object.<anonymous> (C:\\Omegle\\server\\server.js:2121:18)\n    at Module._compile (node:internal/modules/cjs/loader:1688:14)\n    at Object..js (node:internal/modules/cjs/loader:1820:10)","timestamp":"2025-10-04 17:14:48.144"}
{"details":{"error":"Router.use() requires a middleware function but got a undefined","eventId":"b14bc232aef1b60459276d1d17298d65","pid":23476,"severity":"critical","timestamp":1759578288145,"type":"uncaught_exception"},"environment":"development","eventId":"b14bc232aef1b60459276d1d17298d65","level":"error","message":"Security event tracked","service":"campusconnect-server","severity":"critical","timestamp":"2025-10-04 17:14:48.145","type":"uncaught_exception"}
{"environment":"development","error":"Router.use() requires a middleware function but got a undefined","level":"error","message":"ðŸ†˜ UNCAUGHT EXCEPTION - CRITICAL","pid":1716,"service":"campusconnect-server","stack":"TypeError: Router.use() requires a middleware function but got a undefined\n    at Function.use (C:\\Omegle\\node_modules\\express\\lib\\router\\index.js:469:13)\n    at Function.<anonymous> (C:\\Omegle\\node_modules\\express\\lib\\application.js:227:21)\n    at Array.forEach (<anonymous>)\n    at Function.use (C:\\Omegle\\node_modules\\express\\lib\\application.js:224:7)\n    at setupSecurity (C:\\Omegle\\server\\config\\security.js:227:7)\n    at CampusConnectServer.setupMiddleware (C:\\Omegle\\server\\server.js:175:5)\n    at new CampusConnectServer (C:\\Omegle\\server\\server.js:150:10)\n    at Object.<anonymous> (C:\\Omegle\\server\\server.js:2142:18)\n    at Module._compile (node:internal/modules/cjs/loader:1688:14)\n    at Object..js (node:internal/modules/cjs/loader:1820:10)","timestamp":"2025-10-04 17:16:44.475"}
{"details":{"error":"Router.use() requires a middleware function but got a undefined","eventId":"8908c1e781e35fbede0b7afa5d69105f","pid":1716,"severity":"critical","timestamp":1759578404476,"type":"uncaught_exception"},"environment":"development","eventId":"8908c1e781e35fbede0b7afa5d69105f","level":"error","message":"Security event tracked","service":"campusconnect-server","severity":"critical","timestamp":"2025-10-04 17:16:44.476","type":"uncaught_exception"}
{"environment":"development","error":"callback is not a function","errorId":"4137ff31fa6f3a53526c2ce8862736de","ip":"127.0.0.1","level":"error","message":"Enhanced security error handler","method":"GET","service":"campusconnect-server","stack":"TypeError: callback is not a function\n    at MemoryStore.increment (C:\\Omegle\\server\\modules\\monitoring\\rateLimiter.js:24:5)\n    at C:\\Omegle\\node_modules\\express-rate-limit\\dist\\index.cjs:596:59\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async C:\\Omegle\\node_modules\\express-rate-limit\\dist\\index.cjs:576:5","timestamp":"2025-10-04 17:55:57.013","url":"/","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0"}
{"environment":"development","errorId":"4137ff31fa6f3a53526c2ce8862736de","level":"error","message":"Error tracked callback is not a function","method":"GET","route":"/","service":"campusconnect-server","stack":"TypeError: callback is not a function\n    at MemoryStore.increment (C:\\Omegle\\server\\modules\\monitoring\\rateLimiter.js:24:5)\n    at C:\\Omegle\\node_modules\\express-rate-limit\\dist\\index.cjs:596:59\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async C:\\Omegle\\node_modules\\express-rate-limit\\dist\\index.cjs:576:5","timestamp":"2025-10-04 17:55:57.015"}
{"environment":"development","error":"callback is not a function","errorId":"b3db5acafad7c44388c94a3144cef216","ip":"127.0.0.1","level":"error","message":"Enhanced security error handler","method":"GET","service":"campusconnect-server","stack":"TypeError: callback is not a function\n    at MemoryStore.increment (C:\\Omegle\\server\\modules\\monitoring\\rateLimiter.js:24:5)\n    at C:\\Omegle\\node_modules\\express-rate-limit\\dist\\index.cjs:596:59\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async C:\\Omegle\\node_modules\\express-rate-limit\\dist\\index.cjs:576:5","timestamp":"2025-10-04 17:55:57.779","url":"/favicon.ico","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0"}
{"environment":"development","errorId":"b3db5acafad7c44388c94a3144cef216","level":"error","message":"Error tracked callback is not a function","method":"GET","route":"/favicon.ico","service":"campusconnect-server","stack":"TypeError: callback is not a function\n    at MemoryStore.increment (C:\\Omegle\\server\\modules\\monitoring\\rateLimiter.js:24:5)\n    at C:\\Omegle\\node_modules\\express-rate-limit\\dist\\index.cjs:596:59\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async C:\\Omegle\\node_modules\\express-rate-limit\\dist\\index.cjs:576:5","timestamp":"2025-10-04 17:55:57.780"}
{"environment":"development","error":"callback is not a function","errorId":"4a4022fa7696a32a5cfec7b86691a60b","ip":"127.0.0.1","level":"error","message":"Enhanced security error handler","method":"GET","service":"campusconnect-server","stack":"TypeError: callback is not a function\n    at MemoryStore.increment (C:\\Omegle\\server\\modules\\monitoring\\rateLimiter.js:24:5)\n    at C:\\Omegle\\node_modules\\express-rate-limit\\dist\\index.cjs:596:59\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async C:\\Omegle\\node_modules\\express-rate-limit\\dist\\index.cjs:576:5","timestamp":"2025-10-04 17:56:09.860","url":"/","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0"}
{"environment":"development","errorId":"4a4022fa7696a32a5cfec7b86691a60b","level":"error","message":"Error tracked callback is not a function","method":"GET","route":"/","service":"campusconnect-server","stack":"TypeError: callback is not a function\n    at MemoryStore.increment (C:\\Omegle\\server\\modules\\monitoring\\rateLimiter.js:24:5)\n    at C:\\Omegle\\node_modules\\express-rate-limit\\dist\\index.cjs:596:59\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async C:\\Omegle\\node_modules\\express-rate-limit\\dist\\index.cjs:576:5","timestamp":"2025-10-04 17:56:09.860"}
{"environment":"development","error":"callback is not a function","errorId":"bedb0521b04157aecf4f43347a9f3de6","ip":"127.0.0.1","level":"error","message":"Enhanced security error handler","method":"GET","service":"campusconnect-server","stack":"TypeError: callback is not a function\n    at MemoryStore.increment (C:\\Omegle\\server\\modules\\monitoring\\rateLimiter.js:24:5)\n    at C:\\Omegle\\node_modules\\express-rate-limit\\dist\\index.cjs:596:59\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async C:\\Omegle\\node_modules\\express-rate-limit\\dist\\index.cjs:576:5","timestamp":"2025-10-04 17:56:10.550","url":"/favicon.ico","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0"}
{"environment":"development","errorId":"bedb0521b04157aecf4f43347a9f3de6","level":"error","message":"Error tracked callback is not a function","method":"GET","route":"/favicon.ico","service":"campusconnect-server","stack":"TypeError: callback is not a function\n    at MemoryStore.increment (C:\\Omegle\\server\\modules\\monitoring\\rateLimiter.js:24:5)\n    at C:\\Omegle\\node_modules\\express-rate-limit\\dist\\index.cjs:596:59\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async C:\\Omegle\\node_modules\\express-rate-limit\\dist\\index.cjs:576:5","timestamp":"2025-10-04 17:56:10.552"}
{"environment":"development","error":"callback is not a function","errorId":"0d2466255771919e414a5b262506e09c","ip":"127.0.0.1","level":"error","message":"Enhanced security error handler","method":"GET","service":"campusconnect-server","stack":"TypeError: callback is not a function\n    at MemoryStore.increment (C:\\Omegle\\server\\modules\\monitoring\\rateLimiter.js:24:5)\n    at C:\\Omegle\\node_modules\\express-rate-limit\\dist\\index.cjs:596:59\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async C:\\Omegle\\node_modules\\express-rate-limit\\dist\\index.cjs:576:5","timestamp":"2025-10-04 18:15:53.801","url":"/","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0"}
{"environment":"development","errorId":"0d2466255771919e414a5b262506e09c","level":"error","message":"Error tracked callback is not a function","method":"GET","route":"/","service":"campusconnect-server","stack":"TypeError: callback is not a function\n    at MemoryStore.increment (C:\\Omegle\\server\\modules\\monitoring\\rateLimiter.js:24:5)\n    at C:\\Omegle\\node_modules\\express-rate-limit\\dist\\index.cjs:596:59\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async C:\\Omegle\\node_modules\\express-rate-limit\\dist\\index.cjs:576:5","timestamp":"2025-10-04 18:15:53.802"}
{"environment":"development","error":"callback is not a function","errorId":"f80ba7dfe0cdefbad20f176d6a440e8a","ip":"127.0.0.1","level":"error","message":"Enhanced security error handler","method":"GET","service":"campusconnect-server","stack":"TypeError: callback is not a function\n    at MemoryStore.increment (C:\\Omegle\\server\\modules\\monitoring\\rateLimiter.js:24:5)\n    at C:\\Omegle\\node_modules\\express-rate-limit\\dist\\index.cjs:596:59\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async C:\\Omegle\\node_modules\\express-rate-limit\\dist\\index.cjs:576:5","timestamp":"2025-10-04 18:15:54.449","url":"/favicon.ico","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0"}
{"environment":"development","errorId":"f80ba7dfe0cdefbad20f176d6a440e8a","level":"error","message":"Error tracked callback is not a function","method":"GET","route":"/favicon.ico","service":"campusconnect-server","stack":"TypeError: callback is not a function\n    at MemoryStore.increment (C:\\Omegle\\server\\modules\\monitoring\\rateLimiter.js:24:5)\n    at C:\\Omegle\\node_modules\\express-rate-limit\\dist\\index.cjs:596:59\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async C:\\Omegle\\node_modules\\express-rate-limit\\dist\\index.cjs:576:5","timestamp":"2025-10-04 18:15:54.450"}
{"environment":"development","error":"callback is not a function","errorId":"32f43edf8476c471b4f165636d0e5e5a","ip":"127.0.0.1","level":"error","message":"Enhanced security error handler","method":"GET","service":"campusconnect-server","stack":"TypeError: callback is not a function\n    at MemoryStore.increment (C:\\Omegle\\server\\modules\\monitoring\\rateLimiter.js:24:5)\n    at C:\\Omegle\\node_modules\\express-rate-limit\\dist\\index.cjs:596:59\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async C:\\Omegle\\node_modules\\express-rate-limit\\dist\\index.cjs:576:5","timestamp":"2025-10-04 18:21:26.754","url":"/health","userAgent":"curl/8.14.1"}
{"environment":"development","errorId":"32f43edf8476c471b4f165636d0e5e5a","level":"error","message":"Error tracked callback is not a function","method":"GET","route":"/health","service":"campusconnect-server","stack":"TypeError: callback is not a function\n    at MemoryStore.increment (C:\\Omegle\\server\\modules\\monitoring\\rateLimiter.js:24:5)\n    at C:\\Omegle\\node_modules\\express-rate-limit\\dist\\index.cjs:596:59\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async C:\\Omegle\\node_modules\\express-rate-limit\\dist\\index.cjs:576:5","timestamp":"2025-10-04 18:21:26.755"}
{"environment":"development","error":"callback is not a function","errorId":"981eb891f56409e221cf76bda399b696","ip":"127.0.0.1","level":"error","message":"Enhanced security error handler","method":"GET","service":"campusconnect-server","stack":"TypeError: callback is not a function\n    at MemoryStore.increment (C:\\Omegle\\server\\modules\\monitoring\\rateLimiter.js:24:5)\n    at C:\\Omegle\\node_modules\\express-rate-limit\\dist\\index.cjs:596:59\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async C:\\Omegle\\node_modules\\express-rate-limit\\dist\\index.cjs:576:5","timestamp":"2025-10-04 18:21:26.985","url":"/api/health","userAgent":"curl/8.14.1"}
{"environment":"development","errorId":"981eb891f56409e221cf76bda399b696","level":"error","message":"Error tracked callback is not a function","method":"GET","route":"/api/health","service":"campusconnect-server","stack":"TypeError: callback is not a function\n    at MemoryStore.increment (C:\\Omegle\\server\\modules\\monitoring\\rateLimiter.js:24:5)\n    at C:\\Omegle\\node_modules\\express-rate-limit\\dist\\index.cjs:596:59\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async C:\\Omegle\\node_modules\\express-rate-limit\\dist\\index.cjs:576:5","timestamp":"2025-10-04 18:21:26.986"}
{"environment":"development","error":"callback is not a function","errorId":"6602731cf1641d342b8450592deb8251","ip":"127.0.0.1","level":"error","message":"Enhanced security error handler","method":"GET","service":"campusconnect-server","stack":"TypeError: callback is not a function\n    at MemoryStore.increment (C:\\Omegle\\server\\modules\\monitoring\\rateLimiter.js:24:5)\n    at C:\\Omegle\\node_modules\\express-rate-limit\\dist\\index.cjs:596:59\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async C:\\Omegle\\node_modules\\express-rate-limit\\dist\\index.cjs:576:5","timestamp":"2025-10-04 18:21:27.233","url":"/","userAgent":"curl/8.14.1"}
{"environment":"development","errorId":"6602731cf1641d342b8450592deb8251","level":"error","message":"Error tracked callback is not a function","method":"GET","route":"/","service":"campusconnect-server","stack":"TypeError: callback is not a function\n    at MemoryStore.increment (C:\\Omegle\\server\\modules\\monitoring\\rateLimiter.js:24:5)\n    at C:\\Omegle\\node_modules\\express-rate-limit\\dist\\index.cjs:596:59\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async C:\\Omegle\\node_modules\\express-rate-limit\\dist\\index.cjs:576:5","timestamp":"2025-10-04 18:21:27.235"}
{"endpoint":"/","environment":"development","errorId":"1fcc36e0c39b316fe259613b61fe4ff9","level":"error","message":"Error tracked HTTP 404","method":"GET","requestId":"aa6ef5bc3054f4829b2142e386b1bf30","service":"campusconnect-server","stack":"Error: HTTP 404\n    at EnhancedHealthMonitor.trackRequest (C:\\Omegle\\server\\utils\\healthMonitor.js:696:23)\n    at EnhancedHealthMonitor.trackResponseTime (C:\\Omegle\\server\\utils\\healthMonitor.js:731:10)\n    at ServerResponse.<anonymous> (C:\\Omegle\\server\\server.js:380:28)\n    at ServerResponse.emit (node:events:530:35)\n    at onFinish (node:_http_outgoing:1082:10)\n    at callback (node:internal/streams/writable:766:21)\n    at afterWrite (node:internal/streams/writable:710:5)\n    at afterWriteTick (node:internal/streams/writable:696:10)\n    at process.processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-10-04 18:46:49.039"}
